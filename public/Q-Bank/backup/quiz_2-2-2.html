<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10단원: 에너지와 지속가능 발전 - 통합과학 퀴즈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex flex-col">

    <!-- 헤더 -->
    <header class="bg-indigo-600 text-white p-4 shadow-md z-10 shrink-0">
        <div class="max-w-2xl mx-auto flex justify-between items-center">
            <h1 class="text-lg font-bold flex items-center gap-2">
                <i class="fas fa-bolt"></i> 10. 에너지와 지속가능 발전 (랜덤 10문항)
            </h1>
            <a href="index.html" class="text-xs bg-indigo-500 hover:bg-indigo-400 px-3 py-1 rounded-full transition">
                <i class="fas fa-home"></i> 홈으로
            </a>
        </div>
    </header>

    <!-- 메인 컨텐츠 영역 -->
    <main class="flex-1 overflow-y-auto p-4 flex items-start justify-center">
        <div id="quiz-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden fade-in min-h-[400px] mb-8 relative">
            
            <!-- 진행 상태 바 -->
            <div class="w-full bg-gray-200 h-2">
                <div id="progress-bar" class="bg-indigo-500 h-2 transition-all duration-300" style="width: 0%"></div>
            </div>

            <!-- 시작 화면 -->
            <div id="start-screen" class="p-8 text-center flex flex-col items-center justify-center h-full min-h-[400px]">
                <div class="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mb-6 text-3xl text-indigo-600 animate-bounce">
                    <i class="fas fa-plug"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">단원 실전 퀴즈</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    '에너지와 지속가능 발전' 단원 문제 은행에서<br>
                    <strong class="text-indigo-600">10문제</strong>를 무작위로 추출했습니다.<br>
                    준비되셨나요?
                </p>
                <button onclick="startQuiz()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-xl transition shadow-lg text-lg flex items-center gap-2 transform hover:scale-105 duration-200">
                    <i class="fas fa-play"></i> 문제 풀기 시작
                </button>
            </div>

            <!-- 문제 영역 -->
            <div id="question-area" class="hidden p-6 md:p-8">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-sm font-bold text-indigo-600 tracking-wider">Q <span id="current-num">1</span> / <span id="total-num">10</span></span>
                    <span id="score-display" class="text-sm font-semibold text-gray-500">0점</span>
                </div>

                <h2 id="question-text" class="text-xl font-bold mb-6 text-gray-800 leading-snug">
                    문제 로딩 중...
                </h2>

                <!-- 힌트 -->
                <div class="mb-6">
                    <button onclick="toggleHint()" class="text-sm text-indigo-500 hover:text-indigo-700 flex items-center gap-1 focus:outline-none transition">
                        <i class="far fa-lightbulb"></i> 힌트 보기
                    </button>
                    <div id="hint-box" class="hidden mt-2 p-3 bg-yellow-50 text-yellow-800 text-sm rounded-lg border border-yellow-200 fade-in">
                        <!-- 힌트 내용 -->
                    </div>
                </div>

                <!-- 보기 리스트 -->
                <div id="options-list" class="space-y-3"></div>

                <!-- 해설 -->
                <div id="rationale-area" class="hidden mt-6 p-4 rounded-xl border fade-in bg-gray-50">
                    <div class="flex items-start gap-3">
                        <div id="rationale-icon" class="text-2xl mt-1 shrink-0"></div>
                        <div>
                            <h3 id="rationale-title" class="font-bold text-lg mb-1"></h3>
                            <p id="rationale-text" class="text-sm leading-relaxed text-gray-700"></p>
                        </div>
                    </div>
                    <button id="next-btn" onclick="nextQuestion()" class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition shadow-lg flex justify-center items-center gap-2">
                        다음 문제 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- 결과 화면 -->
            <div id="result-screen" class="hidden p-8 text-center flex flex-col items-center justify-center h-full min-h-[400px]">
                <div class="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center mb-6 text-4xl text-indigo-600">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 class="text-3xl font-bold mb-2">퀴즈 완료!</h2>
                <p class="text-gray-600 mb-8">학습이 끝났습니다.</p>
                
                <div class="w-full max-w-sm bg-gray-50 rounded-xl p-6 mb-8 border border-gray-200">
                    <p class="text-sm text-gray-500 mb-1">최종 점수</p>
                    <p class="text-4xl font-bold text-indigo-600"><span id="final-score">0</span> / 100</p>
                </div>

                <div class="flex gap-3 w-full max-w-sm">
                    <button onclick="location.reload()" class="flex-1 bg-white border border-gray-300 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-50 transition">
                        다시 풀기
                    </button>
                    <a href="index.html" class="flex-1 bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition flex items-center justify-center">
                        목록으로
                    </a>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ==========================================
        // 10단원: 에너지와 지속가능 발전 문제 은행 (30문항)
        // ==========================================
        const questionBank = [
            { question: "코일 주위에서 자석을 움직일 때 코일에 전류가 흐르는 현상은?", answerOptions: [{text:"정전기 유도",isCorrect:false},{text:"전자기 유도",isCorrect:true,rationale:"코일 내부의 자기장 변화를 방해하는 방향으로 유도 전류가 흐르는 현상을 전자기 유도라고 합니다."},{text:"자기화",isCorrect:false},{text:"초전도 현상",isCorrect:false}], hint: "발전기의 기본 원리입니다." },
            { question: "발전기에서 일어나는 에너지 전환 과정으로 옳은 것은?", answerOptions: [{text:"전기 에너지 → 역학적 에너지",isCorrect:false},{text:"역학적 에너지 → 전기 에너지",isCorrect:true,rationale:"발전기는 터빈을 돌리는 운동(역학적) 에너지를 전자기 유도를 통해 전기 에너지로 전환하는 장치입니다."},{text:"화학 에너지 → 빛 에너지",isCorrect:false},{text:"열 에너지 → 화학 에너지",isCorrect:false}], hint: "모터를 반대로 돌린다고 생각해보세요." },
            { question: "송전 과정에서 전력 손실을 줄이기 위한 가장 효과적인 방법은?", answerOptions: [{text:"전류를 높인다",isCorrect:false},{text:"전압을 높인다",isCorrect:true,rationale:"송전 전압을 n배 높이면 송전 전류는 1/n배가 되고, 손실 전력(I²R)은 1/n²배로 크게 줄어듭니다."},{text:"저항을 높인다",isCorrect:false},{text:"송전선을 길게 한다",isCorrect:false}], hint: "전압을 높여서 전류를 줄여야 합니다." },
            { question: "변압기의 1차 코일과 2차 코일의 감은 수 비가 1:2일 때, 전압의 비는?", answerOptions: [{text:"1:1",isCorrect:false},{text:"1:2",isCorrect:true,rationale:"변압기에서 전압은 코일의 감은 수에 비례합니다 (V1/V2 = N1/N2). 따라서 전압 비도 1:2입니다."},{text:"2:1",isCorrect:false},{text:"1:4",isCorrect:false}], hint: "감은 수와 전압은 비례합니다." },
            { question: "태양광 발전의 특징으로 옳지 않은 것은?", answerOptions: [{text:"환경 오염 물질이 없다.",isCorrect:false},{text:"유지 보수가 간편하다.",isCorrect:false},{text:"발전 효율이 매우 높고 날씨 영향을 받지 않는다.",isCorrect:true,rationale:"태양광 발전은 날씨와 일조량의 영향을 많이 받으며, 화력/원자력에 비해 아직 에너지 효율이 낮은 편입니다."},{text:"빛 에너지를 직접 전기 에너지로 바꾼다.",isCorrect:false}], hint: "비가 오면 전기를 만들기 힘듭니다." },
            { question: "수소 연료 전지에서 수소가 공급되는 극과 반응 생성물은?", answerOptions: [{text:"(-)극, 이산화 탄소",isCorrect:false},{text:"(+)극, 물",isCorrect:false},{text:"(-)극, 물",isCorrect:true,rationale:"수소는 (-)극에서 산화되어 수소 이온과 전자가 되고, (+)극의 산소와 만나 최종적으로 물(H2O)을 생성합니다."},{text:"(+)극, 수소 기체",isCorrect:false}], hint: "수소는 전자를 내놓고 산화됩니다." },
            { question: "파력 발전과 조력 발전의 공통적인 에너지원은?", answerOptions: [{text:"지열 에너지",isCorrect:false},{text:"해양 에너지",isCorrect:true,rationale:"두 발전 방식 모두 바다(파도, 조수 간만의 차)를 이용하는 해양 에너지를 기반으로 합니다."},{text:"바이오 에너지",isCorrect:false},{text:"핵에너지",isCorrect:false}], hint: "바다에서 얻습니다." },
            { question: "핵분열을 이용해 에너지를 생산하는 발전 방식은?", answerOptions: [{text:"화력 발전",isCorrect:false},{text:"원자력 발전",isCorrect:true,rationale:"원자력 발전은 우라늄 등의 원자핵이 분열할 때 나오는 막대한 열에너지로 물을 끓여 터빈을 돌립니다."},{text:"수력 발전",isCorrect:false},{text:"풍력 발전",isCorrect:false}], hint: "우라늄을 사용합니다." },
            { question: "송전선에 흐르는 전류가 2배가 되면 손실 전력은 몇 배가 되는가?", answerOptions: [{text:"2배",isCorrect:false},{text:"4배",isCorrect:true,rationale:"손실 전력은 전류의 제곱에 비례합니다 (P_loss = I²R). 전류가 2배면 손실 전력은 2² = 4배가 됩니다."},{text:"1/2배",isCorrect:false},{text:"변화 없다",isCorrect:false}], hint: "공식에 제곱이 들어갑니다." },
            { question: "변압기에서 전자기 유도 현상이 일어나는 곳은?", answerOptions: [{text:"1차 코일에서만",isCorrect:false},{text:"2차 코일에서만",isCorrect:false},{text:"1차, 2차 코일 모두",isCorrect:false},{text:"철심을 통한 2차 코일",isCorrect:true,rationale:"1차 코일의 교류 전류가 자기장을 변화시키면, 이 변화된 자기장이 철심을 통해 2차 코일에 유도 기전력을 발생시킵니다."}], hint: "자기장의 변화가 전달되어 전기를 만듭니다." },
            { question: "태양 전지의 기본 원리가 되는 효과는?", answerOptions: [{text:"온실 효과",isCorrect:false},{text:"광전 효과",isCorrect:true,rationale:"빛을 비추면 반도체에서 전자와 양공이 분리되어 전류가 흐르는 현상을 광전 효과(광기전력 효과)라고 합니다."},{text:"도플러 효과",isCorrect:false},{text:"나비 효과",isCorrect:false}], hint: "빛 광(光)자를 씁니다." },
            { question: "지열 발전의 근원적인 에너지원은 무엇인가?", answerOptions: [{text:"태양 에너지",isCorrect:false},{text:"지구 내부 에너지",isCorrect:true,rationale:"지열 발전은 지구 내부의 방사성 물질 붕괴열 등 지구 내부 에너지를 이용합니다. (태양 에너지가 근원이 아닙니다!)"},{text:"바람 에너지",isCorrect:false},{text:"화석 연료",isCorrect:false}], hint: "땅 속의 열입니다." },
            { question: "화석 연료의 대안으로, 옥수수나 사탕수수 등을 발효시켜 만드는 에너지는?", answerOptions: [{text:"바이오 에너지",isCorrect:true,rationale:"생물 유기체(바이오매스)를 변환하여 얻는 에너지를 바이오 에너지라고 합니다."},{text:"수소 에너지",isCorrect:false},{text:"지열 에너지",isCorrect:false},{text:"폐기물 에너지",isCorrect:false}], hint: "식물이나 미생물을 이용합니다." },
            { question: "전력을 효율적으로 관리하고 분배하기 위해 IT 기술을 접목한 차세대 전력망은?", answerOptions: [{text:"스마트 그리드",isCorrect:true,rationale:"스마트 그리드(지능형 전력망)는 공급자와 소비자가 실시간으로 정보를 교환하여 에너지 효율을 최적화합니다."},{text:"슈퍼 그리드",isCorrect:false},{text:"마이크로 그리드",isCorrect:false},{text:"파워 그리드",isCorrect:false}], hint: "똑똑한 전력망입니다." },
            { question: "다음 중 '신에너지'에 해당하는 것은?", answerOptions: [{text:"풍력",isCorrect:false},{text:"태양광",isCorrect:false},{text:"수소 에너지",isCorrect:true,rationale:"한국 법령상 '신에너지'는 수소, 연료 전지, 석탄 액화 가스화 등이며, 태양광/풍력 등은 '재생 에너지'로 분류됩니다."},{text:"지열",isCorrect:false}], hint: "기존에 없던 새로운 방식입니다." },
            { question: "발전소에서 생산된 전기를 가정까지 보내는 과정을 무엇이라 하는가?", answerOptions: [{text:"배전",isCorrect:false},{text:"송전",isCorrect:true,rationale:"발전소에서 변전소까지 전력을 보내는 과정을 송전, 변전소에서 가정으로 나누어 보내는 것을 배전이라고 합니다."},{text:"발전",isCorrect:false},{text:"변전",isCorrect:false}], hint: "보낼 송(送)자를 씁니다." },
            { question: "초전도 케이블을 송전에 이용할 때의 장점은?", answerOptions: [{text:"전압을 낮출 수 있다.",isCorrect:false},{text:"저항이 0이 되어 전력 손실이 없다.",isCorrect:true,rationale:"초전도체는 특정 온도 이하에서 전기 저항이 0이 되므로, 송전 중 열에 의한 전력 손실이 거의 없습니다."},{text:"설치 비용이 저렴하다.",isCorrect:false},{text:"냉각 장치가 필요 없다.",isCorrect:false}], hint: "저항이 사라집니다." },
            { question: "핵융합 발전의 연료로 사용되는 물질은?", answerOptions: [{text:"우라늄",isCorrect:false},{text:"플루토늄",isCorrect:false},{text:"중수소, 삼중수소",isCorrect:true,rationale:"핵융합은 가벼운 원소인 수소 동위원소들이 융합하여 헬륨이 되는 과정에서 에너지를 얻습니다."},{text:"라듐",isCorrect:false}], hint: "바닷물에서 얻을 수 있는 수소입니다." },
            { question: "적정 기술(Appropriate Technology)의 조건으로 알맞지 않은 것은?", answerOptions: [{text:"현지 재료를 사용한다.",isCorrect:false},{text:"사용법이 간단하다.",isCorrect:false},{text:"첨단 기술과 고비용이 필요하다.",isCorrect:true,rationale:"적정 기술은 소외된 지역의 환경과 경제적 여건에 맞춰 저비용, 간단한 유지보수를 지향합니다."},{text:"환경을 파괴하지 않는다.",isCorrect:false}], hint: "누구나 쉽게 쓸 수 있어야 합니다." },
            { question: "다음 중 터빈을 돌리지 않고 전기를 생산하는 방식은?", answerOptions: [{text:"화력 발전",isCorrect:false},{text:"원자력 발전",isCorrect:false},{text:"태양광 발전",isCorrect:true,rationale:"태양광 발전과 연료 전지는 터빈 없이 물질의 성질이나 화학 반응을 통해 직접 전기를 생산합니다."},{text:"풍력 발전",isCorrect:false}], hint: "빛을 바로 전기로 바꿉니다." },
            { question: "발전기가 전기를 만들 때 자석을 더 빨리 움직이면 유도 전류의 세기는?", answerOptions: [{text:"세진다",isCorrect:true,rationale:"자기장의 변화 속도가 빠를수록 유도 기전력이 커져 더 센 유도 전류가 흐릅니다 (패러데이 법칙)."},{text:"약해진다",isCorrect:false},{text:"변함없다",isCorrect:false},{text:"0이 된다",isCorrect:false}], hint: "변화가 급격할수록 셉니다." },
            { question: "변압기는 어떤 전류를 변환할 수 있는가?", answerOptions: [{text:"직류(DC)만",isCorrect:false},{text:"교류(AC)만",isCorrect:true,rationale:"변압기는 자기장의 변화가 계속 일어나는 교류 전류에서만 작동합니다. 직류는 자기장이 변하지 않아 유도 전류를 만들 수 없습니다."},{text:"직류와 교류 모두",isCorrect:false},{text:"정전기",isCorrect:false}], hint: "전류의 방향이 바뀌어야 합니다." },
            { question: "바람개비를 돌려 전기를 얻는 발전 방식의 단점은?", answerOptions: [{text:"자원이 고갈된다.",isCorrect:false},{text:"소음이 발생하고 설치 장소 제약이 있다.",isCorrect:true,rationale:"풍력 발전은 소음 문제와 바람이 일정하게 부는 곳에만 설치해야 한다는 제약이 있습니다."},{text:"온실 가스를 많이 배출한다.",isCorrect:false},{text:"밤에는 발전할 수 없다.",isCorrect:false}], hint: "바람 부는 소리가 시끄럽습니다." },
            { question: "연료 전지의 에너지 효율이 높은 이유는?", answerOptions: [{text:"열 에너지를 거치지 않기 때문에",isCorrect:true,rationale:"화학 에너지를 열 에너지나 운동 에너지로 바꾸는 중간 단계 없이 바로 전기 에너지로 변환하므로 효율이 높습니다."},{text:"크기가 작아서",isCorrect:false},{text:"수소가 가벼워서",isCorrect:false},{text:"온도가 높아서",isCorrect:false}], hint: "단계를 건너뛰어 바로 전기가 됩니다." },
            { question: "조력 발전은 무엇을 이용하는가?", answerOptions: [{text:"파도의 힘",isCorrect:false},{text:"밀물과 썰물의 수위 차",isCorrect:true,rationale:"조력 발전은 밀물과 썰물 때 발생하는 해수면의 높이 차(조수 간만의 차)를 이용하여 터빈을 돌립니다."},{text:"바닷물의 온도 차",isCorrect:false},{text:"바람의 힘",isCorrect:false}], hint: "갯벌이 드러나는 현상입니다." },
            { question: "지속 가능한 발전을 위해 필요한 태도가 아닌 것은?", answerOptions: [{text:"에너지 절약 생활화",isCorrect:false},{text:"자원 재활용",isCorrect:false},{text:"무한한 개발 중심 사고",isCorrect:true,rationale:"환경 보전과 경제 발전의 균형을 맞추는 것이 지속 가능한 발전이며, 무분별한 개발은 이를 저해합니다."},{text:"신재생 에너지 개발",isCorrect:false}], hint: "미래 세대를 생각하지 않는 태도입니다." },
            { question: "가정용 전기 기구들이 병렬로 연결된 이유는?", answerOptions: [{text:"전체 저항을 높이기 위해",isCorrect:false},{text:"각 기구에 같은 전압을 걸어주기 위해",isCorrect:true,rationale:"병렬연결을 해야 모든 기구에 정격 전압(예: 220V)이 일정하게 공급되고, 하나를 꺼도 다른 기구를 쓸 수 있습니다."},{text:"전류를 약하게 하기 위해",isCorrect:false},{text:"전선을 아끼기 위해",isCorrect:false}], hint: "모두 220V를 써야 합니다." },
            { question: "태양 에너지가 근원이 아닌 에너지는?", answerOptions: [{text:"풍력 에너지",isCorrect:false},{text:"수력 에너지",isCorrect:false},{text:"원자력 에너지",isCorrect:true,rationale:"원자력(핵에너지)과 지열 에너지는 지구 내부 물질이나 핵반응에서 유래하며, 태양 에너지와는 관련이 없습니다. 풍력/수력은 기상 현상으로 태양열이 원인입니다."},{text:"화석 연료",isCorrect:false}], hint: "우라늄은 태양에서 온 것이 아닙니다." },
            { question: "1차 코일 감은 수가 100회, 2차 코일 감은 수가 500회인 변압기에 200V를 입력하면 출력 전압은?", answerOptions: [{text:"40V",isCorrect:false},{text:"100V",isCorrect:false},{text:"1000V",isCorrect:true,rationale:"1:5 비율이므로 전압도 5배가 됩니다. 200V * 5 = 1000V."},{text:"2000V",isCorrect:false}], hint: "감은 수가 5배 늘었습니다." },
            { question: "폐기물 에너지를 이용하는 방법의 장점은?", answerOptions: [{text:"악취가 없다.",isCorrect:false},{text:"쓰레기 양을 줄이고 에너지를 얻는다.",isCorrect:true,rationale:"폐기물을 소각하거나 가공하여 연료로 쓰므로 쓰레기 매립 문제를 해결함과 동시에 에너지를 생산하는 일석이조 효과가 있습니다."},{text:"유해 가스가 전혀 나오지 않는다.",isCorrect:false},{text:"설치비가 들지 않는다.",isCorrect:false}], hint: "쓰레기를 줄여줍니다." }
        ];

        // ==========================================
        // 퀴즈 로직 (단독 실행용)
        // ==========================================
        let currentQuizList = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        function startQuiz() {
            // 랜덤 셔플 및 10문제 추출
            const shuffled = [...questionBank];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            // *설정: 여기서 slice(0, 10)을 조절하면 문항 수 변경 가능
            currentQuizList = shuffled.slice(0, 10);

            // UI 전환
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('question-area').classList.remove('hidden');
            document.getElementById('total-num').innerText = currentQuizList.length;

            loadQuestion();
        }

        function loadQuestion() {
            isAnswered = false;
            const qData = currentQuizList[currentQuestionIndex];
            
            document.getElementById('current-num').innerText = currentQuestionIndex + 1;
            document.getElementById('question-text').innerText = qData.question;
            document.getElementById('hint-box').innerText = qData.hint;
            document.getElementById('hint-box').classList.add('hidden');
            
            const progress = ((currentQuestionIndex) / currentQuizList.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            const rationaleArea = document.getElementById('rationale-area');
            rationaleArea.classList.add('hidden');
            rationaleArea.classList.remove('bg-green-50', 'bg-red-50', 'border-green-200', 'border-red-200');
            
            const optionsList = document.getElementById('options-list');
            optionsList.innerHTML = '';

            qData.answerOptions.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = `w-full text-left p-4 rounded-xl border-2 border-gray-200 hover:border-indigo-400 hover:bg-indigo-50 transition duration-200 font-medium text-gray-700 flex items-center gap-3 group bg-white`;
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 flex items-center justify-center group-hover:bg-indigo-200 group-hover:text-indigo-700 transition font-bold text-sm shrink-0">${index + 1}</span>
                    <span class="leading-snug">${option.text}</span>
                `;
                btn.onclick = () => checkAnswer(option, btn, qData.answerOptions);
                optionsList.appendChild(btn);
            });
        }

        function toggleHint() {
            document.getElementById('hint-box').classList.toggle('hidden');
        }

        function checkAnswer(selectedOption, btnElement, allOptions) {
            if (isAnswered) return;
            isAnswered = true;

            const isCorrect = selectedOption.isCorrect;
            const rationale = selectedOption.rationale || "해설이 없습니다.";
            const allButtons = document.getElementById('options-list').children;

            if (isCorrect) {
                score += 10;
                document.getElementById('score-display').innerText = `${score}점`;
                styleButton(btnElement, 'correct');
                showRationale(true, rationale);
            } else {
                styleButton(btnElement, 'wrong');
                const correctIndex = allOptions.findIndex(o => o.isCorrect === true);
                if (correctIndex !== -1) styleButton(allButtons[correctIndex], 'correct-light');
                showRationale(false, rationale);
            }

            for (let btn of allButtons) {
                btn.onclick = null;
                btn.classList.add('cursor-default');
                btn.classList.remove('hover:bg-indigo-50', 'hover:border-indigo-400');
            }
        }

        function styleButton(btn, type) {
            btn.classList.remove('border-gray-200', 'bg-white');
            const iconSpan = btn.querySelector('span:first-child');
            if (type === 'correct') {
                btn.classList.add('border-green-500', 'bg-green-100', 'text-green-900');
                iconSpan.innerHTML = '<i class="fas fa-check"></i>';
                iconSpan.classList.add('bg-green-200', 'text-green-800');
            } else if (type === 'wrong') {
                btn.classList.add('border-red-500', 'bg-red-100', 'text-red-900');
                iconSpan.innerHTML = '<i class="fas fa-times"></i>';
                iconSpan.classList.add('bg-red-200', 'text-red-800');
            } else if (type === 'correct-light') {
                btn.classList.add('border-green-500', 'bg-green-50', 'text-green-800');
            }
        }

        function showRationale(isCorrect, text) {
            const area = document.getElementById('rationale-area');
            const icon = document.getElementById('rationale-icon');
            const title = document.getElementById('rationale-title');
            const body = document.getElementById('rationale-text');
            
            area.classList.remove('hidden');
            if (isCorrect) {
                area.classList.add('bg-green-50', 'border-green-200');
                icon.innerHTML = '<i class="fas fa-check-circle text-green-600"></i>';
                title.innerText = "정답입니다!";
                title.className = 'font-bold text-lg mb-1 text-green-800';
            } else {
                area.classList.add('bg-red-50', 'border-red-200');
                icon.innerHTML = '<i class="fas fa-exclamation-circle text-red-600"></i>';
                title.innerText = "오답입니다.";
                title.className = 'font-bold text-lg mb-1 text-red-800';
            }
            body.innerText = text;
            setTimeout(() => area.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100);
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuizList.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('question-area').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            document.getElementById('progress-bar').style.width = '100%';
        }
    </script>
</body>
</html>