<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11단원: 과학과 미래 사회 - 통합과학 퀴즈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex flex-col">

    <!-- 헤더 -->
    <header class="bg-indigo-600 text-white p-4 shadow-md z-10 shrink-0">
        <div class="max-w-2xl mx-auto flex justify-between items-center">
            <h1 class="text-lg font-bold flex items-center gap-2">
                <i class="fas fa-robot"></i> 11. 과학과 미래 사회 (랜덤 10문항)
            </h1>
            <a href="index.html" class="text-xs bg-indigo-500 hover:bg-indigo-400 px-3 py-1 rounded-full transition">
                <i class="fas fa-home"></i> 홈으로
            </a>
        </div>
    </header>

    <!-- 메인 컨텐츠 영역 -->
    <main class="flex-1 overflow-y-auto p-4 flex items-start justify-center">
        <div id="quiz-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden fade-in min-h-[400px] mb-8 relative">
            
            <!-- 진행 상태 바 -->
            <div class="w-full bg-gray-200 h-2">
                <div id="progress-bar" class="bg-indigo-500 h-2 transition-all duration-300" style="width: 0%"></div>
            </div>

            <!-- 시작 화면 -->
            <div id="start-screen" class="p-8 text-center flex flex-col items-center justify-center h-full min-h-[400px]">
                <div class="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mb-6 text-3xl text-indigo-600 animate-bounce">
                    <i class="fas fa-microchip"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">단원 실전 퀴즈</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    '과학과 미래 사회' 단원 문제 은행에서<br>
                    <strong class="text-indigo-600">10문제</strong>를 무작위로 추출했습니다.<br>
                    준비되셨나요?
                </p>
                <button onclick="startQuiz()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-xl transition shadow-lg text-lg flex items-center gap-2 transform hover:scale-105 duration-200">
                    <i class="fas fa-play"></i> 문제 풀기 시작
                </button>
            </div>

            <!-- 문제 영역 -->
            <div id="question-area" class="hidden p-6 md:p-8">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-sm font-bold text-indigo-600 tracking-wider">Q <span id="current-num">1</span> / <span id="total-num">10</span></span>
                    <span id="score-display" class="text-sm font-semibold text-gray-500">0점</span>
                </div>

                <h2 id="question-text" class="text-xl font-bold mb-6 text-gray-800 leading-snug">
                    문제 로딩 중...
                </h2>

                <!-- 힌트 -->
                <div class="mb-6">
                    <button onclick="toggleHint()" class="text-sm text-indigo-500 hover:text-indigo-700 flex items-center gap-1 focus:outline-none transition">
                        <i class="far fa-lightbulb"></i> 힌트 보기
                    </button>
                    <div id="hint-box" class="hidden mt-2 p-3 bg-yellow-50 text-yellow-800 text-sm rounded-lg border border-yellow-200 fade-in">
                        <!-- 힌트 내용 -->
                    </div>
                </div>

                <!-- 보기 리스트 -->
                <div id="options-list" class="space-y-3"></div>

                <!-- 해설 -->
                <div id="rationale-area" class="hidden mt-6 p-4 rounded-xl border fade-in bg-gray-50">
                    <div class="flex items-start gap-3">
                        <div id="rationale-icon" class="text-2xl mt-1 shrink-0"></div>
                        <div>
                            <h3 id="rationale-title" class="font-bold text-lg mb-1"></h3>
                            <p id="rationale-text" class="text-sm leading-relaxed text-gray-700"></p>
                        </div>
                    </div>
                    <button id="next-btn" onclick="nextQuestion()" class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition shadow-lg flex justify-center items-center gap-2">
                        다음 문제 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- 결과 화면 -->
            <div id="result-screen" class="hidden p-8 text-center flex flex-col items-center justify-center h-full min-h-[400px]">
                <div class="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center mb-6 text-4xl text-indigo-600">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 class="text-3xl font-bold mb-2">퀴즈 완료!</h2>
                <p class="text-gray-600 mb-8">학습이 끝났습니다.</p>
                
                <div class="w-full max-w-sm bg-gray-50 rounded-xl p-6 mb-8 border border-gray-200">
                    <p class="text-sm text-gray-500 mb-1">최종 점수</p>
                    <p class="text-4xl font-bold text-indigo-600"><span id="final-score">0</span> / 100</p>
                </div>

                <div class="flex gap-3 w-full max-w-sm">
                    <button onclick="location.reload()" class="flex-1 bg-white border border-gray-300 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-50 transition">
                        다시 풀기
                    </button>
                    <a href="index.html" class="flex-1 bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition flex items-center justify-center">
                        목록으로
                    </a>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ==========================================
        // 11단원: 과학과 미래 사회 문제 은행 (30문항)
        // ==========================================
        const questionBank = [
            { question: "다음 중 빅데이터(Big Data)의 특징인 3V에 해당하지 않는 것은?", answerOptions: [{text:"규모(Volume)",isCorrect:false},{text:"속도(Velocity)",isCorrect:false},{text:"다양성(Variety)",isCorrect:false},{text:"가상성(Virtuality)",isCorrect:true,rationale:"빅데이터의 3V는 방대한 규모(Volume), 빠른 생성 속도(Velocity), 다양한 형태(Variety)를 의미합니다. 최근에는 가치(Value)나 정확성(Veracity)을 더해 5V로 부르기도 합니다."}], hint: "V로 시작하는 단어들입니다." },
            { question: "인간의 지능적인 행동을 컴퓨터가 모방할 수 있도록 하는 기술은?", answerOptions: [{text:"사물 인터넷(IoT)",isCorrect:false},{text:"인공지능(AI)",isCorrect:true,rationale:"인공지능은 학습, 추론, 지각 등 인간의 지적 능력을 컴퓨터 시스템으로 구현하는 기술입니다."},{text:"클라우드 컴퓨팅",isCorrect:false},{text:"가상 현실(VR)",isCorrect:false}], hint: "Artificial Intelligence" },
            { question: "사물에 센서와 통신 기능을 내장하여 인터넷에 연결하는 기술은?", answerOptions: [{text:"빅데이터",isCorrect:false},{text:"사물 인터넷(IoT)",isCorrect:true,rationale:"사물 인터넷(IoT)은 가전제품, 전자기기 등 다양한 사물에 네트워크를 연결하여 정보를 공유하는 기술입니다."},{text:"블록체인",isCorrect:false},{text:"증강 현실",isCorrect:false}], hint: "Internet of Things" },
            { question: "항생제를 오남용했을 때 나타날 수 있는 가장 큰 부작용은?", answerOptions: [{text:"바이러스 감염 증가",isCorrect:false},{text:"항생제 내성균(슈퍼박테리아) 출현",isCorrect:true,rationale:"항생제를 오남용하면 해당 항생제에 죽지 않는 내성균이 자연 선택되어 살아남고 증식하게 됩니다."},{text:"면역력 과다 증가",isCorrect:false},{text:"유전병 발생",isCorrect:false}], hint: "약이 더 이상 듣지 않습니다." },
            { question: "백신의 예방 원리에 대한 설명으로 옳은 것은?", answerOptions: [{text:"병원균을 직접 죽이는 약물을 주사한다.",isCorrect:false},{text:"우리 몸에 기억 세포를 미리 만들어 둔다.",isCorrect:true,rationale:"백신은 약화되거나 죽은 병원체를 주입하여 1차 면역 반응을 유도하고, 기억 세포를 생성해 실제 감염 시 신속하게 대처하게 합니다."},{text:"이미 감염된 병을 치료하는 치료제다.",isCorrect:false},{text:"선천적 면역을 없애는 역할을 한다.",isCorrect:false}], hint: "면역계가 적을 기억하게 합니다." },
            { question: "푸른곰팡이에서 최초의 항생제인 페니실린을 발견한 과학자는?", answerOptions: [{text:"파스퇴르",isCorrect:false},{text:"코흐",isCorrect:false},{text:"플레밍",isCorrect:true,rationale:"알렉산더 플레밍은 푸른곰팡이가 세균의 증식을 억제하는 것을 발견하고 페니실린을 분리했습니다."},{text:"제너",isCorrect:false}], hint: "실수로 곰팡이를 키웠습니다." },
            { question: "유전자 재조합 기술을 이용해 만든 농산물을 무엇이라 하는가?", answerOptions: [{text:"GMO",isCorrect:true,rationale:"유전자 변형 생물(Genetically Modified Organism)은 유전자 재조합 기술 등으로 새로운 형질을 갖게 된 생물체를 말합니다."},{text:"BMI",isCorrect:false},{text:"DNA",isCorrect:false},{text:"WHO",isCorrect:false}], hint: "Genetically Modified Organism" },
            { question: "다음 중 '약한 인공지능(Weak AI)'에 해당하는 것은?", answerOptions: [{text:"자아를 가진 로봇",isCorrect:false},{text:"특정 문제 해결에 특화된 AI (예: 알파고)",isCorrect:true,rationale:"현재의 대부분의 AI는 바둑, 번역, 운전 등 특정 영역의 문제 해결에만 특화된 약한 인공지능입니다."},{text:"인간과 동일한 지성을 가진 AI",isCorrect:false},{text:"스스로 감정을 느끼는 AI",isCorrect:false}], hint: "시키는 일만 잘합니다." },
            { question: "세균(박테리아)과 바이러스의 차이점으로 옳은 것은?", answerOptions: [{text:"바이러스는 세포 구조를 가진다.",isCorrect:false},{text:"세균은 항생제로 치료할 수 있다.",isCorrect:true,rationale:"세균은 세포벽 합성을 억제하는 항생제로 치료 가능하지만, 바이러스는 세포 구조가 없어 항생제가 듣지 않고 항바이러스제를 써야 합니다."},{text:"바이러스가 세균보다 크기가 크다.",isCorrect:false},{text:"세균은 스스로 증식할 수 없다.",isCorrect:false}], hint: "감기는 항생제로 낫지 않습니다." },
            { question: "특정 유전자 부위를 정교하게 자르고 교정할 수 있는 기술은?", answerOptions: [{text:"유전자 가위(크리스퍼)",isCorrect:true,rationale:"유전자 가위(CRISPR-Cas9) 기술은 DNA의 특정 염기 서열을 찾아가 절단하고 편집하는 혁신적인 생명 공학 기술입니다."},{text:"유전자 복제",isCorrect:false},{text:"줄기세포 배양",isCorrect:false},{text:"핵치환",isCorrect:false}], hint: "가위처럼 자릅니다." },
            { question: "배아 줄기세포 연구가 가진 윤리적 쟁점은?", answerOptions: [{text:"연구 비용이 너무 비싸다.",isCorrect:false},{text:"생명체로 볼 수 있는 배아를 파괴한다.",isCorrect:true,rationale:"배아 줄기세포를 얻는 과정에서 잠재적 생명인 배아를 파괴해야 하므로 인간 존엄성 훼손 논란이 있습니다."},{text:"효과가 전혀 입증되지 않았다.",isCorrect:false},{text:"동물 실험을 하지 않는다.",isCorrect:false}], hint: "생명의 시작을 건드립니다." },
            { question: "기계 학습(Machine Learning)의 한 분야로, 인간의 뇌 신경망을 모방한 방식은?", answerOptions: [{text:"딥러닝(Deep Learning)",isCorrect:true,rationale:"딥러닝은 인공 신경망(ANN)을 기반으로 다층 구조를 통해 데이터의 특징을 스스로 학습하는 머신러닝의 일종입니다."},{text:"사물 인터넷",isCorrect:false},{text:"블록체인",isCorrect:false},{text:"클라우드",isCorrect:false}], hint: "깊게 학습합니다." },
            { question: "기후 변화에 대한 과학적 대응 방안으로 가장 거리가 먼 것은?", answerOptions: [{text:"이산화 탄소 포집 및 저장 기술(CCS) 개발",isCorrect:false},{text:"신재생 에너지 효율 향상",isCorrect:false},{text:"화석 연료 사용량 증대",isCorrect:true,rationale:"기후 변화의 주원인인 온실가스를 줄이기 위해 화석 연료 사용은 줄이고 대체 에너지를 늘려야 합니다."},{text:"인공 광합성 기술 연구",isCorrect:false}], hint: "온난화를 부추깁니다." },
            { question: "자율 주행 자동차가 사고 상황에서 누구를 구할지 결정해야 하는 윤리적 딜레마는?", answerOptions: [{text:"죄수의 딜레마",isCorrect:false},{text:"트롤리 딜레마",isCorrect:true,rationale:"제어 불능 상태의 열차(트롤리)가 누구를 칠 것인지 선택하는 문제에서 유래하여, AI의 윤리적 판단 알고리즘 문제를 비유합니다."},{text:"공유지의 비극",isCorrect:false},{text:"하인리히 법칙",isCorrect:false}], hint: "전차(트롤리) 문제입니다." },
            { question: "로봇이 인간의 일자리를 대체함에 따라 로봇 소유주에게 부과하자는 세금은?", answerOptions: [{text:"탄소세",isCorrect:false},{text:"로봇세",isCorrect:true,rationale:"로봇세는 자동화로 인한 실직자 지원 및 사회 안전망 재원 마련을 위해 로봇 사용에 세금을 부과하자는 개념입니다."},{text:"소득세",isCorrect:false},{text:"보유세",isCorrect:false}], hint: "로봇에게 매기는 세금입니다." },
            { question: "인터넷 서버에 데이터를 저장하고, 필요할 때 접속해 사용하는 컴퓨팅 환경은?", answerOptions: [{text:"엣지 컴퓨팅",isCorrect:false},{text:"클라우드 컴퓨팅",isCorrect:true,rationale:"구름(Cloud)에 데이터를 띄워놓듯 중앙 서버에 저장하고 언제 어디서나 이용하는 방식을 클라우드 컴퓨팅이라고 합니다."},{text:"양자 컴퓨팅",isCorrect:false},{text:"슈퍼 컴퓨팅",isCorrect:false}], hint: "구름을 뜻합니다." },
            { question: "다음 중 빅데이터 분석을 통해 얻을 수 있는 가치가 아닌 것은?", answerOptions: [{text:"질병 확산 경로 예측",isCorrect:false},{text:"개인 맞춤형 쇼핑 추천",isCorrect:false},{text:"개인의 사생활 침해",isCorrect:true,rationale:"사생활 침해는 빅데이터 활용 시 주의하고 방지해야 할 부작용이지, 추구하는 가치가 아닙니다."},{text:"교통 혼잡 구간 파악",isCorrect:false}], hint: "부정적인 결과입니다." },
            { question: "개발 도상국 등의 소외된 계층을 위해 적은 비용으로 삶의 질을 높이는 기술은?", answerOptions: [{text:"적정 기술",isCorrect:true,rationale:"적정 기술(Appropriate Technology)은 해당 지역의 환경, 경제, 사회적 여건에 맞게 고안된 기술입니다. (예: 라이프 스트로)"},{text:"나노 기술",isCorrect:false},{text:"우주 공학",isCorrect:false},{text:"생명 공학",isCorrect:false}], hint: "그들에게 딱 맞는 기술입니다." },
            { question: "연구자가 지켜야 할 연구 윤리로 옳지 않은 것은?", answerOptions: [{text:"연구 데이터 조작 금지",isCorrect:false},{text:"타인의 연구 결과 표절 금지",isCorrect:false},{text:"유리한 결과만 선별하여 보고",isCorrect:true,rationale:"자신의 가설에 맞는 데이터만 선택적으로 보고하는 것은 데이터 변조에 해당하며 연구 부정행위입니다."},{text:"실험 대상의 안전과 권리 보호",isCorrect:false}], hint: "정직하지 못한 행동입니다." },
            { question: "현실 세계의 배경에 3차원 가상 이미지를 겹쳐 보여주는 기술은?", answerOptions: [{text:"가상 현실(VR)",isCorrect:false},{text:"증강 현실(AR)",isCorrect:true,rationale:"포켓몬 GO처럼 현실 배경 위에 가상의 정보를 덧입혀 보여주는 기술을 증강 현실(Augmented Reality)이라고 합니다."},{text:"메타버스",isCorrect:false},{text:"디지털 트윈",isCorrect:false}], hint: "현실을 '증강'시킵니다." },
            { question: "정보 통신 기술(ICT)을 활용하여 도시의 주요 시설을 지능형으로 관리하는 도시는?", answerOptions: [{text:"스마트 팜",isCorrect:false},{text:"스마트 팩토리",isCorrect:false},{text:"스마트 시티",isCorrect:true,rationale:"교통, 환경, 에너지 등 도시의 인프라를 네트워크로 연결하여 효율적으로 관리하는 도시를 스마트 시티라고 합니다."},{text:"에코 시티",isCorrect:false}], hint: "똑똑한 도시입니다." },
            { question: "디지털 기기 활용 능력 차이로 인해 발생하는 사회적, 경제적 격차는?", answerOptions: [{text:"정보 격차(Digital Divide)",isCorrect:true,rationale:"정보 소외 계층이 디지털 기기나 정보에 접근하지 못해 발생하는 불평등을 정보 격차라고 합니다."},{text:"소득 격차",isCorrect:false},{text:"세대 차이",isCorrect:false},{text:"문화 지체",isCorrect:false}], hint: "디지털로 나뉩니다." },
            { question: "알고리즘이 학습 데이터의 편향성을 그대로 배워 차별적인 결과를 내놓는 현상은?", answerOptions: [{text:"알고리즘 편향성",isCorrect:true,rationale:"AI가 학습하는 데이터 자체가 성별, 인종 차별적이면 AI의 판단 결과도 편향될 수 있습니다."},{text:"알고리즘 투명성",isCorrect:false},{text:"딥페이크",isCorrect:false},{text:"특이점",isCorrect:false}], hint: "한쪽으로 치우칩니다." },
            { question: "미래 식량 부족 문제를 해결하기 위한 대안으로 연구되고 있는 것은?", answerOptions: [{text:"인공 고기(배양육)",isCorrect:true,rationale:"가축 사육으로 인한 환경 오염을 줄이고 식량 부족을 해결하기 위해 세포를 배양해 만드는 인공 고기가 연구되고 있습니다."},{text:"화석 연료",isCorrect:false},{text:"일회용 플라스틱",isCorrect:false},{text:"항생제 대량 투여",isCorrect:false}], hint: "실험실에서 만든 고기입니다." },
            { question: "정보 통신 기술을 의료에 접목하여 멀리 떨어진 환자를 진료하는 것은?", answerOptions: [{text:"원격 진료",isCorrect:true,rationale:"IT 기술을 이용해 의사가 환자를 직접 대면하지 않고 진료 및 처방을 하는 것을 원격 진료(Telemedicine)라고 합니다."},{text:"정밀 의료",isCorrect:false},{text:"재생 의학",isCorrect:false},{text:"한방 진료",isCorrect:false}], hint: "멀리서 진료합니다." },
            { question: "3D 프린팅 기술이 의료 분야에 활용되는 예시로 적절한 것은?", answerOptions: [{text:"인공 장기 및 보철물 제작",isCorrect:true,rationale:"환자의 신체 구조에 딱 맞는 인공 뼈, 치아, 의수 등을 3D 프린터로 출력하여 이식할 수 있습니다."},{text:"신약 개발 속도 저하",isCorrect:false},{text:"병원 운영 시스템 관리",isCorrect:false},{text:"백신 대량 생산",isCorrect:false}], hint: "몸에 맞는 부품을 찍어냅니다." },
            { question: "세계보건기구(WHO)가 선포하는 감염병 최고 경보 단계는?", answerOptions: [{text:"에피데믹",isCorrect:false},{text:"엔데믹",isCorrect:false},{text:"팬데믹",isCorrect:true,rationale:"팬데믹(Pandemic)은 감염병이 전 세계적으로 대유행하는 상태를 의미합니다. (예: 코로나19)"},{text:"아웃브레이크",isCorrect:false}], hint: "전 세계적 대유행입니다." },
            { question: "과학 기술의 발달이 사회에 미치는 영향에 대한 설명으로 옳은 것은?", answerOptions: [{text:"항상 긍정적인 영향만 준다.",isCorrect:false},{text:"사회 제도나 윤리와는 무관하다.",isCorrect:false},{text:"새로운 윤리적 문제를 일으키기도 한다.",isCorrect:true,rationale:"과학 기술은 삶을 편리하게 하지만, AI 윤리, 유전자 조작 논란, 환경 파괴 등 새로운 문제를 야기하므로 사회적 합의가 필요합니다."},{text:"과학자는 연구 결과에 책임이 없다.",isCorrect:false}], hint: "빛과 그림자가 있습니다." },
            { question: "다음 중 재생 의학의 핵심 기술로, 손상된 조직이나 장기를 복원하는 데 쓰이는 세포는?", answerOptions: [{text:"적혈구",isCorrect:false},{text:"줄기세포",isCorrect:true,rationale:"줄기세포는 여러 종류의 신체 조직으로 분화할 수 있는 능력이 있어 손상된 기능을 재생하는 데 활용됩니다."},{text:"신경 세포",isCorrect:false},{text:"백혈구",isCorrect:false}], hint: "줄기가 되는 세포입니다." },
            { question: "환경을 보호하기 위해 플라스틱 사용을 줄여야 하는 주된 이유는?", answerOptions: [{text:"미세 플라스틱으로 인한 생태계 교란",isCorrect:true,rationale:"잘게 부서진 미세 플라스틱은 먹이 사슬을 통해 생물체에 축적되어 생태계와 인간 건강을 위협합니다."},{text:"플라스틱이 너무 비싸서",isCorrect:false},{text:"플라스틱은 물에 녹기 때문에",isCorrect:false},{text:"재활용이 전혀 불가능해서",isCorrect:false}], hint: "눈에 보이지 않는 작은 조각이 문제입니다." }
        ];

        // ==========================================
        // 퀴즈 로직 (단독 실행용)
        // ==========================================
        let currentQuizList = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        function startQuiz() {
            // 랜덤 셔플 및 10문제 추출
            const shuffled = [...questionBank];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            // *설정: 여기서 slice(0, 10)을 조절하면 문항 수 변경 가능
            currentQuizList = shuffled.slice(0, 10);

            // UI 전환
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('question-area').classList.remove('hidden');
            document.getElementById('total-num').innerText = currentQuizList.length;

            loadQuestion();
        }

        function loadQuestion() {
            isAnswered = false;
            const qData = currentQuizList[currentQuestionIndex];
            
            document.getElementById('current-num').innerText = currentQuestionIndex + 1;
            document.getElementById('question-text').innerText = qData.question;
            document.getElementById('hint-box').innerText = qData.hint;
            document.getElementById('hint-box').classList.add('hidden');
            
            const progress = ((currentQuestionIndex) / currentQuizList.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            const rationaleArea = document.getElementById('rationale-area');
            rationaleArea.classList.add('hidden');
            rationaleArea.classList.remove('bg-green-50', 'bg-red-50', 'border-green-200', 'border-red-200');
            
            const optionsList = document.getElementById('options-list');
            optionsList.innerHTML = '';

            qData.answerOptions.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = `w-full text-left p-4 rounded-xl border-2 border-gray-200 hover:border-indigo-400 hover:bg-indigo-50 transition duration-200 font-medium text-gray-700 flex items-center gap-3 group bg-white`;
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 flex items-center justify-center group-hover:bg-indigo-200 group-hover:text-indigo-700 transition font-bold text-sm shrink-0">${index + 1}</span>
                    <span class="leading-snug">${option.text}</span>
                `;
                btn.onclick = () => checkAnswer(option, btn, qData.answerOptions);
                optionsList.appendChild(btn);
            });
        }

        function toggleHint() {
            document.getElementById('hint-box').classList.toggle('hidden');
        }

        function checkAnswer(selectedOption, btnElement, allOptions) {
            if (isAnswered) return;
            isAnswered = true;

            const isCorrect = selectedOption.isCorrect;
            const rationale = selectedOption.rationale || "해설이 없습니다.";
            const allButtons = document.getElementById('options-list').children;

            if (isCorrect) {
                score += 10;
                document.getElementById('score-display').innerText = `${score}점`;
                styleButton(btnElement, 'correct');
                showRationale(true, rationale);
            } else {
                styleButton(btnElement, 'wrong');
                const correctIndex = allOptions.findIndex(o => o.isCorrect === true);
                if (correctIndex !== -1) styleButton(allButtons[correctIndex], 'correct-light');
                showRationale(false, rationale);
            }

            for (let btn of allButtons) {
                btn.onclick = null;
                btn.classList.add('cursor-default');
                btn.classList.remove('hover:bg-indigo-50', 'hover:border-indigo-400');
            }
        }

        function styleButton(btn, type) {
            btn.classList.remove('border-gray-200', 'bg-white');
            const iconSpan = btn.querySelector('span:first-child');
            if (type === 'correct') {
                btn.classList.add('border-green-500', 'bg-green-100', 'text-green-900');
                iconSpan.innerHTML = '<i class="fas fa-check"></i>';
                iconSpan.classList.add('bg-green-200', 'text-green-800');
            } else if (type === 'wrong') {
                btn.classList.add('border-red-500', 'bg-red-100', 'text-red-900');
                iconSpan.innerHTML = '<i class="fas fa-times"></i>';
                iconSpan.classList.add('bg-red-200', 'text-red-800');
            } else if (type === 'correct-light') {
                btn.classList.add('border-green-500', 'bg-green-50', 'text-green-800');
            }
        }

        function showRationale(isCorrect, text) {
            const area = document.getElementById('rationale-area');
            const icon = document.getElementById('rationale-icon');
            const title = document.getElementById('rationale-title');
            const body = document.getElementById('rationale-text');
            
            area.classList.remove('hidden');
            if (isCorrect) {
                area.classList.add('bg-green-50', 'border-green-200');
                icon.innerHTML = '<i class="fas fa-check-circle text-green-600"></i>';
                title.innerText = "정답입니다!";
                title.className = 'font-bold text-lg mb-1 text-green-800';
            } else {
                area.classList.add('bg-red-50', 'border-red-200');
                icon.innerHTML = '<i class="fas fa-exclamation-circle text-red-600"></i>';
                title.innerText = "오답입니다.";
                title.className = 'font-bold text-lg mb-1 text-red-800';
            }
            body.innerText = text;
            setTimeout(() => area.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100);
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuizList.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('question-area').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            document.getElementById('progress-bar').style.width = '100%';
        }
    </script>
</body>
</html>