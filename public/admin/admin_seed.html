<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê°“í†µê³¼ ê´€ë¦¬ì - ëª¨ì˜ê³ ì‚¬ DB ìƒì„±ê¸°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ìŠ¤íƒ€ì¼ë§ -->
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 40px; line-height: 1.6; max-width: 600px; margin: 0 auto; background: #f3f4f6; color: #333; }
        h1 { border-bottom: 3px solid #4f46e5; padding-bottom: 15px; color: #111827; margin-bottom: 30px; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 25px; }
        .input-group { margin-bottom: 20px; display: flex; gap: 20px; }
        .input-wrapper { flex: 1; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 0.9em; }
        input[type="number"] { width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        input:focus { outline: none; border-color: #4f46e5; ring: 2px solid #4f46e5; }
        
        button { 
            width: 100%; 
            background-color: #4f46e5; 
            color: white; 
            border: none; 
            padding: 15px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: bold; 
            transition: background 0.2s;
        }
        button:hover { background-color: #4338ca; }
        button:active { transform: scale(0.98); }

        #log { 
            background: #1f2937; 
            color: #10b981; 
            padding: 20px; 
            border-radius: 12px; 
            height: 300px; 
            overflow-y: auto; 
            font-family: 'Consolas', monospace; 
            font-size: 14px; 
            white-space: pre-wrap; 
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
        }
        .info-text { font-size: 14px; color: #6b7280; margin-bottom: 20px; background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid #3b82f6; }
    </style>
</head>
<body>

    <h1>ğŸ› ï¸ ëª¨ì˜ê³ ì‚¬ ë°ì´í„° ìƒì„± ë„êµ¬</h1>

    <div class="card">
        <div class="info-text">
            <strong>ğŸ’¡ ì•ˆì „í•œ ì¶”ê°€ ê¸°ëŠ¥</strong><br>
            ì›í•˜ëŠ” íšŒì°¨ì˜ ë²”ìœ„ë§Œ ì§€ì •í•˜ì—¬ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
            ì˜ˆ) ë‚˜ì¤‘ì— 25íšŒ, 26íšŒë§Œ ì¶”ê°€í•˜ë ¤ë©´ <strong>ì‹œì‘: 25 / ì¢…ë£Œ: 26</strong>ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.<br>
            (ê¸°ì¡´ 1~24íšŒ ë°ì´í„°ëŠ” ê±´ë“œë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.)
        </div>
        
        <div class="input-group">
            <div class="input-wrapper">
                <label for="startNum">ì‹œì‘ íšŒì°¨ (Start)</label>
                <input type="number" id="startNum" value="1" min="1">
            </div>
            <div class="input-wrapper">
                <label for="endNum">ì¢…ë£Œ íšŒì°¨ (End)</label>
                <input type="number" id="endNum" value="24" min="1">
            </div>
        </div>

        <button id="btn-seed">ë°ì´í„° ìƒì„± ì‹œì‘</button>
    </div>

    <div id="log">ëŒ€ê¸° ì¤‘... ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>

    <script type="module">
        // Firebase ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸ (CDN ë°©ì‹)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // âš ï¸ index.htmlê³¼ ë™ì¼í•œ Firebase ì„¤ì •ê°’ ì‚¬ìš©
        const firebaseConfig = {
            apiKey: "AIzaSyD5axOHuQQ9Y5VmIqvN1AeuVyAVivQlTXs",
            authDomain: "godtonggwa.firebaseapp.com",
            projectId: "godtonggwa",
            storageBucket: "godtonggwa.firebasestorage.app",
            messagingSenderId: "1087434066468",
            appId: "1:1087434066468:web:00a75c9329543afc76e6b1"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        document.getElementById('btn-seed').addEventListener('click', async () => {
            const start = parseInt(document.getElementById('startNum').value);
            const end = parseInt(document.getElementById('endNum').value);
            const logDiv = document.getElementById('log');

            // ìœ íš¨ì„± ê²€ì‚¬
            if(isNaN(start) || isNaN(end)) {
                alert("ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
            if(start > end) {
                alert("ì‹œì‘ ë²ˆí˜¸ê°€ ì¢…ë£Œ ë²ˆí˜¸ë³´ë‹¤ í´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return;
            }

            // í™•ì¸ ë©”ì‹œì§€
            if(!confirm(`${start}íšŒë¶€í„° ${end}íšŒê¹Œì§€ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì£¼ì˜: ë§Œì•½ í•´ë‹¹ íšŒì°¨ê°€ ì´ë¯¸ ì¡´ì¬í•˜ë©´ ë‚´ìš©ì´ ì´ˆê¸°í™”(ë®ì–´ì“°ê¸°) ë©ë‹ˆë‹¤.`)) return;

            logDiv.innerText = `>>> ì‘ì—… ì‹œì‘ (ë²”ìœ„: ${start}íšŒ ~ ${end}íšŒ)\n----------------------------------------\n`;

            // ë°˜ë³µë¬¸ìœ¼ë¡œ ë°ì´í„° ìƒì„±
            for (let i = start; i <= end; i++) {
                // ë‚ ì§œ ê³„ì‚° (ì˜ˆì‹œ: 1ì›” 1ì¼ë¶€í„° 2ì£¼ ê°„ê²©)
                // ì‹¤ì œ ì„œë¹„ìŠ¤ ì‹œì—ëŠ” ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ë‚ ì§œë¥¼ ê°œë³„ ìˆ˜ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì•¼ í•¨
                let date = new Date(2024, 0, 1 + (i-1)*14); 
                
                // ë¬¸ì„œ ID í¬ë§·íŒ… (exam_01, exam_02 ...)
                const docId = `exam_${String(i).padStart(2, '0')}`;
                
                // ì €ì¥í•  ë°ì´í„° ê°ì²´
                const examData = {
                    id: i,
                    title: `ì œ ${i}íšŒ ê°“í†µê³¼ ëª¨ì˜ê³ ì‚¬`,
                    subTitle: `2024 ì‹œì¦Œ ${i <= 12 ? 'ìƒë°˜ê¸°' : 'í•˜ë°˜ê¸°'} Vol.${i}`,
                    date: date.toISOString(), // ISO ë‚ ì§œ í˜•ì‹
                    price: 5000,
                    // ì˜ˆì‹œ ë¡œì§: 12íšŒê¹Œì§€ë§Œ 'ì˜¤í”ˆë¨(isOpen: true)', ë‚˜ë¨¸ì§€ëŠ” 'ì˜¤í”ˆ ì˜ˆì •'
                    // ë‚˜ì¤‘ì— ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ trueë¡œ ë°”ê¿”ì£¼ë©´ í•™ìƒë“¤ì—ê²Œ ë³´ì„
                    isOpen: i <= 12 
                };

                try {
                    // Firestoreì— ì €ì¥
                    // setDocì„ ì“°ë˜ { merge: true } ì˜µì…˜ì„ ì£¼ë©´, í˜¹ì‹œ ì‹¤ìˆ˜ë¡œ ëŒë ¸ì„ ë•Œ 
                    // ì˜ë„ì¹˜ ì•Šê²Œ ë‹¤ë¥¸ í•„ë“œê°€ ë‚ ì•„ê°€ëŠ” ê²ƒì„ ì¼ë¶€ ë°©ì§€í•  ìˆ˜ ìˆìŒ (ì—¬ê¸°ì„  ì „ì²´ ë°ì´í„°ë¥¼ ì§€ì •í•˜ë¯€ë¡œ ë®ì–´ì“°ê¸°ì™€ ë™ì¼)
                    await setDoc(doc(db, "public_exams", docId), examData, { merge: true });
                    
                    logDiv.innerText += `[ì„±ê³µ] ${docId} ì €ì¥ ì™„ë£Œ\n`;
                    logDiv.scrollTop = logDiv.scrollHeight; // ìŠ¤í¬ë¡¤ ìë™ ë‚´ë¦¬ê¸°
                } catch (e) {
                    console.error(e);
                    logDiv.innerText += `[ì‹¤íŒ¨] ${docId} ì—ëŸ¬ ë°œìƒ: ${e.message}\n`;
                }
            }

            logDiv.innerText += `----------------------------------------\n>>> ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`;
            alert("ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
        });
    </script>
</body>
</html>